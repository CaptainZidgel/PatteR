<!DOCTYPE html>
<html>
<head>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="fengari-web.js" type="text/javascript"></script>
</head>
<body>
	<div id="cheatsheet">
		<h3>Character classes</h3>
			<p>.	|	all characters</p>
			<p>%a	| letters</p>
			<p>%c	| control characters</p>
			<p>%d	| digits</p>
			<p>%l	| lower case letters</p>
			<p>%p	| punctuation characters</p>
			<p>%s	| space characters</p>
			<p>%u	| upper case letters</p>
			<p>%w	| alphanumeric characters</p>
			<p>%x	| hexadecimal digits</p>
			<p>%z	| the character with representation 0</p>
	</div>
	<div id="main">
		<textarea id="sandbox" v-model="sbval" @change="mat()"></textarea><br>
		<input type="text" placeholder="Your pattern" v-model="pattern" @change="mat()" id="pattern">
		<p id="result" v-html="patternResult"></p><br>
	</div>
	<p>The default method used here is string.gsub, so that each potential match is highlighted. string.match will only return the first instance.</p>
	<footer>Special thanks: <a href="https://github.com/gskinner">Grant Skinner</a> for creating <a href="https://regexr.com/">RegExr</a>, which this is based on.</footer>

<script type="application/lua">
	local js = require("js")
	js.global.match = function(_, s, p) return string.match(s, p) end
	js.global.gsub = function(_, s, p, r) return string.gsub(s, p, function(m) return "<mark>"..m.."</mark>" end) end
</script>
<script>
var patter = new Vue({
	el: "#main",
	data: {
		pattern: "%s.",
		sbval: "This is a test of the sandbox",
		result: "This is a test of the sandbox"
	},
	computed: {
		patternResult: function() {
			//return match(this.sbval, this.pattern)
			return gsub(this.sbval, this.pattern)
		}
	},
	methods: {
		mat: function(){console.log("Updating"); this.result = this.sbval}
	}
})
//console.log(match("HeLLo", "%l%w+"), "matched")
</script>
<style>
	body {
		background-color: #ebebeb;
	}
	#cheatsheet {
		width: 200px;
		float: left;
		border: 1px solid black;
		padding: 10px;
		margin: 10px;
	}
	#cheatsheet p {
		margin: 0px;
		white-space: pre-wrap;
	}
	#cheatsheet p:nth-child(even) {
		background-color: white;
	}
  #cheatsheet p:nth-child(odd) {
		background-color: light-gray;
	}
	footer {
		position: absolute;
		bottom: 0;
		margin-left: 15px;
	}
	mark {
		background-color: #7aa9f5;
	}
</style>
</body>
</html>
